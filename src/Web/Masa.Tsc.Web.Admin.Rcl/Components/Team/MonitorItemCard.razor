@namespace Masa.Tsc.Web.Admin.Rcl.Components
@inherits TscComponentBase

<MTooltip Top>
    <ActivatorContent>
        <MCard @attributes="context.Attrs" Class="pa-6" OnClick="OnClickHandler">
            <MCardText Class="d-flex justify-space-between pa-0 pb-6">
                <div class="d-flex flex-column justify-space-around">
                    <div>
                        <span class="h5">@Value.ServiceTotal</span>
                        @if (Value.IsShowApp)
                        {
                            <span class="regular3--text h8 ml-1">/@Value.AppTotal</span>
                        }
                    </div>
                    <span class="regular3--text h8">@T(Value.Text)</span>
                </div>
                <img src="_content/Masa.Tsc.Web.Admin.Rcl/img/team/@(Value.Icon+".svg")" />
            </MCardText>
            <MCardActions Class="pa-0">
                <MProgressLinear Height="4" Color="@Value.Color" Rounded Value="100"></MProgressLinear>
            </MCardActions>
        </MCard>
    </ActivatorContent>
    <ChildContent>
        <div>@T("Project Count")：@Value.ServiceTotal</div>
        @if (Value.Value is MonitorStatuses.Error or MonitorStatuses.Warn)
        {
            <div>@T("Log Count")：@Value.AppTotal</div>
        }
        else if (Value.Value != MonitorStatuses.Normal)
        {
            <div>@T("Service Count")：@Value.AppTotal</div>
        }
    </ChildContent>
</MTooltip>

@code {
    [Parameter]
    public AppMonitorViewDto Value { get; set; } = default!;

    [Parameter]
    public EventCallback<AppMonitorViewDto> OnClick { get; set; }

    private async Task OnClickHandler()
    {
        if (OnClick.HasDelegate)
        {
            await OnClick.InvokeAsync(Value);
        }
    }
}
