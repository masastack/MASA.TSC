@inherits TscComponentBase

<Gridstack Items="Panels" Id="@(ParentPanel is null ? null : ParentPanel.Id.ToString())" Readonly="!IsEdit" Class="@($"{Class}")" ItemStyle="@("background-color:white;border: 1px solid #F0F3FA;border-radius: 12px;"+(IsEdit?"cursor: move;":""))">
    <ItemContent>
        @{
            var actionHeight = context.PanelType == PanelTypes.Tabs || !IsEdit ? 0 : 28;
        }
        @if (IsEdit && context.PanelType != PanelTypes.Tabs)
        {
            <div style=@($"height:{actionHeight}px;") class="d-flex draggable">
                <MSpacer />
                <PanelTool Value="context" ConfigurationChartPanel="ConfigurationChartPanel" RemovePanel="RemovePanel" />
            </div>
        }
        <div style="@($"height:calc(100% - {actionHeight}px);")">
            @switch (context.PanelType)
            {
                case PanelTypes.Tabs:
                    <TabsPanel Panel="context as UpsertTabsPanelDto">
                        <HeaderRightContent>
                            <PanelTool Value="context" AddPanel="AddChildPanel" RemovePanel="RemovePanel" Style="z-index:1000;" />
                        </HeaderRightContent>
                    </TabsPanel>
                    break;
                case PanelTypes.Text:
                    <TextPanel Value=context />
                    break;
                case PanelTypes.Trace:
                    <TscTrace ConfigurationRecord="ConfigurationRecord" />
                    break;
                case PanelTypes.Topology:
                    <TopologyPanel ConfigurationRecord="ConfigurationRecord" />
                    break;
                case PanelTypes.Chart or PanelTypes.Table:
                    <ChartPanel Value="context as UpsertChartPanelDto" />
                    break;
                case PanelTypes.Log:
                    <LogPanel ConfigurationRecord="ConfigurationRecord" />
                    break;
                case PanelTypes.Select:
                    <PanelSelect Panel="context" OnSelect="ReplacePanel" />
                    break;
                default:
                    break;
            }
        </div>
    </ItemContent>
</Gridstack>