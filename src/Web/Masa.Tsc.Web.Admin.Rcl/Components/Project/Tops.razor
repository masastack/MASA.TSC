@namespace Masa.Tsc.Web.Admin.Rcl.Components
@inherits TscComponentBase

<MCard Width="Width" Height="Height" Class="d-flex flex-column rounded-lg">
    <MCardTitle Class="d-flex justify-space-between">
        <MLabel Class="emphasis2--text h6">@Title</MLabel>
        <MIcon>mdi-information-outline</MIcon>
    </MCardTitle>
    <MCardText Class="flex-grow-1">
        <MList>
            @foreach (var item in Data)
            {
                <MListItem Class="px-0" Dense>
                    <MListItemAvatar Size="24">
                        <MIcon Color="@item.Color">@item.Icon</MIcon>
                    </MListItemAvatar>
                    <MListItemContent>
                        <MListItemTitle Class="d-flex justify-space-between">
                            <MLabel Class="body2 regular2--text d-inline-block text-truncate">@item.Text</MLabel>
                            <MLabel Class="subtitle2 emphasis2--text ml-6">@item.Value</MLabel>
                        </MListItemTitle>
                        <MListItemSubtitle>
                            <MProgressLinear Height="8" Color="@item.Color" Rounded Value="@item.Value"></MProgressLinear>
                        </MListItemSubtitle>
                    </MListItemContent>
                </MListItem>
            }
        </MList>
    </MCardText>
</MCard>

@code {
    [Parameter]
    public string Title { get; set; }

    [Parameter]
    public List<TempDto> Data { get; set; } = new();

    [Parameter]
    public StringNumber Width { get; set; } = "100%";

    [Parameter]
    public StringNumber Height { get; set; } = "100%";

    protected override void OnAfterRender(bool firstRender)
    {
        if (firstRender)
        {
            Data = new List<TempDto>
            {
                new TempDto
                {
                    Text="create table song (id integer generated by default as identity, artist varchar(255), g",
                    Icon="mdi-folder",
                    Color="#4318FF",
                    Value=23
                },
                new TempDto
                {
                    Text="create table song (id integer generated by default as identity, artist varchar(255), g",
                    Icon="mdi-folder",
                    Color="#05CD99",
                    Value=79
                },
                new TempDto
                {
                    Text="create table song (id integer generated by default as identity, artist varchar(255), g",
                    Icon="mdi-folder",
                    Color="#05CD99",
                    Value=25
                }
            };
            StateHasChanged();
        }
        base.OnAfterRender(firstRender);
    }
}
