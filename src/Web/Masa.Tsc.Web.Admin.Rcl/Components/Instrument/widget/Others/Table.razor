@namespace Masa.Tsc.Web.Admin.Rcl.Components

<MCard Height="410" Class="d-flex flex-column">
    <MCardTitle>
        <MLabel Class="emphasis2--text h6">@Title</MLabel>
    </MCardTitle>
    <MCardText Class="flex-grow-1">
        <MSimpleTable>
            @if (TableOption.ShowTableHeader)
            {
                <thead>
                    <tr>
                        <th class="text-left">
                            Name
                        </th>
                        <th class="text-left">
                            Calories
                        </th>
                    </tr>
                </thead>
            }
            <tbody>
                @foreach (var item in _desserts)
                {
                    <tr @key="item.Name">
                        <td>@item.Name</td>
                        <td>@item.Calories</td>
                    </tr>
                }
            </tbody>
            @if (TableOption.ShowTableFooter)
            {
                <tfoot>
                    <tr>
                        <td>Sum</td>
                        <td>$180</td>
                    </tr>
                </tfoot>
            }
        </MSimpleTable>
 @*       <MDataTable Headers="_headers"
                    ItemsPerPage="TableOption.ItemsPerPage"
                    HideDefaultHeader="TableOption.HideDefaultHeader"
                    HideDefaultFooter="TableOption.HideDefaultFooter"
                    Items="_desserts">
        </MDataTable>*@
    </MCardText>
</MCard>

<MCard Class="mt-6">
    <MCardText>
        <MRow>
            <MCol Md="6">
                <SSelect @bind-Value="@SystemIdentity" Items="_systemIdentities"
                         ItemText="item => item"
                         ItemValue="item => item" />
            </MCol>
            <MCol Md="6">
                <STextField @bind-Value="@Title" Label="Title" />
            </MCol>
            <MCol Md="12">
                <TableFieldMetrics Items="Fields"></TableFieldMetrics>
            </MCol>
        </MRow>
    </MCardText>
</MCard>

@code {
    [Parameter]
    public string Title { get; set; }

    [Parameter]
    public EventCallback<string> TitleChanged { get; set; }

    [Parameter]
    public string SystemIdentity { get; set; }

    [Parameter]
    public EventCallback<string> SystemIdentityChanged { get; set; }

    [Parameter]
    public List<TableFieldItemModel> Fields { get; set; } = new();

    [Parameter]
    public EventCallback<List<TableFieldItemModel>> FieldsChanged { get; set; }

    private List<string> _systemIdentities = new List<string>();

    public class Dessert
    {
        public string Name { get; set; }

        public int Calories { get; set; }

        public double Fat { get; set; }

        public int Carbs { get; set; }

        public double Protein { get; set; }

        public int Sodium { get; set; }

        public string Calcium { get; set; }

        public string Iron { get; set; }
    }

    private List<DataTableHeader<Dessert>> _headers = new List<DataTableHeader<Dessert>>
        {
           new ()
           {
            Text= "Dessert (100g serving)",
            Align= DataTableHeaderAlign.Start,
            Sortable= false,
            Value= nameof(Dessert.Name)
          },
          new (){ Text= "Calories", Value= nameof(Dessert.Calories)},
          new (){ Text= "Fat (g)", Value= nameof(Dessert.Fat)},
          new (){ Text= "Carbs (g)", Value= nameof(Dessert.Carbs)},
          new (){ Text= "Protein (g)", Value= nameof(Dessert.Protein)},
          new (){ Text= "Iron (%)", Value= nameof(Dessert.Iron)}
        };

    private List<Dessert> _desserts = new List<Dessert>
        {
           new Dessert
           {
              Name= "Frozen Yogurt",
              Calories= 159,
              Fat= 6.0,
              Carbs= 24,
              Protein= 4.0,
              Iron= "1%",
            },
            new Dessert
            {
              Name= "Ice cream sandwich",
              Calories= 237,
              Fat= 9.0,
              Carbs= 37,
              Protein= 4.3,
              Iron= "1%",
            },
            new Dessert
            {
              Name= "Eclair",
              Calories= 262,
              Fat= 16.0,
              Carbs= 23,
              Protein= 6.0,
              Iron= "7%",
            },
            new Dessert
            {
              Name= "Cupcake",
              Calories= 305,
              Fat= 3.7,
              Carbs= 67,
              Protein= 4.3,
              Iron= "8%",
            },
            new Dessert
            {
                Name= "Gingerbread",
                Calories= 356,
                Fat= 16.0,
                Carbs= 49,
                Protein= 3.9,
                Iron= "16%"
            },
            new Dessert
            {
                Name= "Jelly bean",
                Calories= 375,
                Fat= 0.0,
                Carbs= 94,
                Protein= 0.0,
                Iron= "0%",
            },
            new Dessert
            {
                Name= "Lollipop",
                Calories= 392,
                Fat= 0.2,
                Carbs= 98,
                Protein= 0,
                Iron= "2%",
            }
        };
}
