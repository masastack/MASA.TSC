@namespace Masa.Tsc.Web.Admin.Rcl.Components
@inherits TscComponentBase
<MCard>
    <MCardText Class="d-flex justify-end">
        <MButton OnClick="OpenDialog">添加</MButton>
        @*<MButton OnClick="SaveAsync">Save</MButton>*@
        <MButton OnClick="@(async()=>await CallParent("close"))">Close</MButton>
    </MCardText>
</MCard>
<MCard>
    <MCardText>
        <MDragZone @ref="_mDragZone" Items="_items" Class="d-flex"></MDragZone>
    </MCardText>
</MCard>

<TscDialog @bind-Value="_showDialog" Persistent Fullscreen>
    <ChildContent>
        <MCard>
            @if (_editPanel == null)
            {
                <MCardTitle>
                    <MRow>
                        <MCol Cols=9>添加</MCol>
                        <MCol Cols=3 Class="d-flex justify-end">
                            <MIcon OnClick="CloseDialog" Class="justify-end">mdi-close</MIcon>
                        </MCol>
                    </MRow>
                </MCardTitle>
            }

            @if (_editPanel == null)
            {
                <MCardText>
                    <TscInstrumentPanels  InstrumentId="Id" OnCallParent="ChildCallHandler" />
                </MCardText>
            }
            else
            {
                <TscInstrumentPanelView Item="_editPanel" OnCallParent="ChildCallHandler" />
            }

        </MCard>
    </ChildContent>
</TscDialog>