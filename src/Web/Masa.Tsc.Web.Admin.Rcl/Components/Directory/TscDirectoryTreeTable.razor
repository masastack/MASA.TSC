@namespace Masa.Tsc.Web.Admin.Rcl.Components
@inherits TscComponentBase
@foreach (var item in Data)
{
    <MRow Class="@($"{_class} {(item.Selected?"blue":"")}")" @onclick="@(async()=>await RowSelectAsync(item))">
        <MCol Cols="11">
            <MIcon>@(item.DirectoryType== DirectoryTypes.Directory?"folder":"fa-file")</MIcon>
            @item.Name
        </MCol>
        <MCol Cols="1" @onclick:stopPropagation>
            @if (item.DirectoryType == DirectoryTypes.Instrument)
            {
                <MIcon OnClick="@(async ()=> await ViewAsync(item))">mdi-eye</MIcon>
            }
            <MIcon Color="@(item.Selected?"white":"blue")" OnClick="@(async ()=> await UpdateAsync(item))">edit</MIcon>
            <MIcon Color="red" Class="ml-2" OnClick="@(async ()=> await DeleteAsync(item))">delete</MIcon>
            @if (item.Children != null && item.Children.Any())
            {
                <MIcon Class="ml-4" OnClick="@(async ()=>await TroggleExpandAsync(item))">@(item.Expand?"expand_more":"navigate_next") </MIcon>
            }
        </MCol>
    </MRow>
    @if (item.Expand && item.Children != null && item.Children.Any())
    {
        <TscDirectoryTreeTable Data=item.Children Deep=Deep+1 Expand=Expand OnCallParent="ChildCallHandler" OnRowSelected=RowSelectAsync></TscDirectoryTreeTable>
    }
}