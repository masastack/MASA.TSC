@namespace Masa.Tsc.Web.Admin.Rcl.Components
@inherits TscComponentBase

<MDataTable Headers="_headers"
            OnOptionsUpdate=OnUpdateOptionsAsync
            ServerItemsLength=_total
            ItemsPerPage="10"
            Items=_data
            TItem="Dictionary<string,object>"
            Loading="_isLoading"
            @ref="_mDataTable">
    <ItemColContent>
        @if (context.Header.Value == "Operate")
        {
            <MIcon OnClick="@(()=>OpenAsync(context.Item))">mdi-view-headline</MIcon>
        }
        else if (context.Header.Text == "Timestamp")
        {
            @(DateTime.Parse(context.Item["@timestamp"].ToString()!).Format(CurrentTimeZone))
        }
        else
        {
            @context.Value
        }
    </ItemColContent>
</MDataTable>

<MDialog @bind-Value="_showDialog"
         Fullscreen>
    <ChildContent>
        <MCard Class="overflow-hidden">
            <MCardTitle Class="d-flex justify-end">
                <MIcon OnClick="()=>_showDialog=false" title="Close">mdi-close</MIcon>
            </MCardTitle>
            <MCardText>
                <TscTraceDetail TraceId="@_selectTraceId"></TscTraceDetail>
            </MCardText>
        </MCard>
    </ChildContent>
</MDialog>
