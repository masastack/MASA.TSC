@namespace Masa.Tsc.Web.Admin.Rcl.Components
@inherits TscComponentBase

<SDataTable Headers="_headers"
            ServerItemsLength="_total"
            ItemsPerPage="_pageSize"
            Items="_data"
            TItem="TraceResponseDto"
            Loading="@Loading"
            Class="rounded-t-0"
            Height='"calc(100vh - 620px)"'>
    <ItemColContent>
        @if (context.Header.Value == "Operate")
        {
            <MIcon OnClick="@(() => OpenAsync(context.Item))">mdi-view-headline</MIcon>
        }
        else if (context.Header.Text == "Timestamp")
        {
            @(context.Item.Timestamp.Format(CurrentTimeZone))
        }
        else if (context.Header.Text == "Service")
        {
            <div class="hover-pointer" @onclick="@(() => OpenAsync(context.Item))">
                @context.Item.Resource["service.name"]
            </div>
        }
        else if (context.Header.Text == "Endpoint")
        {
            @context.Item.GetDispalyName()
        }
        else
        {
            @context.Value
        }
    </ItemColContent>
</SDataTable>

<SPagination @bind-Page="_page"
             @bind-PageSize="_pageSize" 
             Total="_total"
             Class="white px-6 py-3"
             OnChange="HandleOnPaginationUpdate" />

<TscTraceDetail Title="@CurrentTrace?.Resource["service.name"]?.ToString()" @ref="_tscTraceDetail"></TscTraceDetail>
