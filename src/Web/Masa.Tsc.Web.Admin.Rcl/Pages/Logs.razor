@page "/dashboard/log"
@page "/dashboard/log/{TaskId}"
@page "/dashboard/log/{Service}/{StartTime}/{EndTime}/{LogLevel}"
@inject I18n I18n

<PageTitle>@I18n.Log("Log")</PageTitle>

<LogPanel PageMode=true TaskId="@TaskId" StartTime="ToDateTime(StartTime)" EndTime="ToDateTime(EndTime)" Service="@Service" LogLevel="@LogLevel" />

@code {

    /// <summary>
    /// scheduler job taskId
    /// </summary>
    [Parameter]
    public string TaskId { get; set; }

    [Parameter]
    public string StartTime { get; set; }

    [Parameter]
    public string EndTime { get; set; }

    [Parameter]
    public string Service { get; set; }

    [Parameter] 
    public string LogLevel { get; set; }

    DateTime ToDateTime(string str)
    {
        if (DateTime.TryParse(str, out var time))
            return time;
        return DateTime.MinValue;
    }
}